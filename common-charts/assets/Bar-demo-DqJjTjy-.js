import{r as p,i as _,c as g,s as w,u as L,a as O,b as $,d as B,e as T,f as E}from"./common-C8R1ltjb.js";import{g as N,a as A,e as n,b as j,y as z,c as k,T as v}from"./Tips-CD0SNb-X.js";import{C as I,i as D,a as F}from"./installMarkPoint-BOWwEGVM.js";import{_ as G,r as b,o as h,c as J,a as d,b as m,d as M,n as P,e as V,u as q}from"./index-Bt1y0IXA.js";import{i as W}from"./install-C-hkYAk9.js";import{w as H}from"./withInstall-Df4KX8Pz.js";import"./dataSample-CNRCW7Kf.js";import"./sectorHelper-Dh4zBbll.js";class x{constructor({options:e,seriesItem:t}){var a;this.normal={label:{show:!e.hiddenLabel,position:((a=t==null?void 0:t.label)==null?void 0:a.position)||(e==null?void 0:e.labelPosition)||"top",textStyle:{color:n.$fontColor||n.fontColor,fontSize:14},formatter:function(s){if(e.dataset){var o=s.data;return o[s.seriesName]===null||o[s.seriesName]<1?"":o[s.seriesName]}else return e.labelFormatter?e.labelFormatter(s):s.value}}}}}class K{constructor({options:e,data:t}){this.option={toolbox:N(e),title:{text:e.title||null},tooltip:A(e),legend:{bottom:0,textStyle:{color:n.$fontColor||n.fontColor,fontSize:16},show:!0},grid:{right:30},dataset:e.dataset?{dimensions:Object.keys(t[0]),source:t}:null,xAxis:{data:(()=>{if(!e.dataset)return t&&t.xAxis})(),splitLine:{show:e.isCross,lineStyle:{type:"dashed",color:"#E8E8E8"}},axisLabel:j,axisLine:{lineStyle:{color:"#CCCCCC"}}},yAxis:e.yAxis||z,series:(()=>{if(e.dataset){let a=0;t&&t[0]&&(a=_(t[0])?Object.keys(t[0]).length-1:t[0].length-1);const s=[];for(let o=0;o<a;o++)s.push({type:"bar",markLine:k(e,t),barGap:"20%",barCategoryGap:"50%",stack:e.stackIndex&&e.stackIndex.indexOf(o)>-1,itemStyle:new x({options:e})});return s}else{const a=[];return t?(t.series&&t.series.length>0&&t.series.forEach((s,o)=>{if(s.type=s.type||"bar",s.barMaxWidth=38,e.emphasisDsiabled||(s.emphasis={focus:"series"}),s.markLine=k(e,t),s.itemStyle=new x({options:e,seriesItem:s}),e.stackIndex&&(s.stack=e.stackIndex.indexOf(o)>-1),e.stackLabel){s.stack=e.stackLabel[o];const c=t.series.filter(l=>l.stack===s.stack);if(c.length>1&&a.indexOf(c[0].stack)===-1){const l=JSON.parse(JSON.stringify(c[0]));a.push(l.stack);const f=[];l.data.forEach((i,y)=>{let u=0;c.forEach(C=>{u=C.data[y]+u}),f.push(u)}),l.data=f;const S={show:!0,position:"top",offset:e.stackTotalLabelPosion||[0,0],textStyle:{color:n.$fontColor||n.fontColor,fontSize:16},formatter:function(i){return`{total|${f[i.dataIndex].toFixed(1)}}
 ${i.value}`},rich:{total:{color:n.$standardColor||n.standardColor,fontSize:16}}};for(let i=t.series.length-1;i>=0;i--)if(t.series[i].stack===l.stack){t.series[i].itemStyle.normal.label=S;break}}}}),t.series||[]):[]}})()}}}function Q(r){const{data:e}=r._props,t=new K({options:r._props.params,data:e}).option,a=p({},t,r._props.options);return r._props.options.series&&(a.series=p([],t.series,r._props.options.series)),r.params.dataset&&e.length>1&&(a.dataset.source=e.reverse(),a.dataset.dimensions=Object.keys(e[0])),a}const R={name:"Bar",components:{Tips:v,Checkbox:I},mixins:[g],props:{id:{type:String,default:"BarChart",require:!0}},data(){return{checked:!0}},computed:{charOptions(){return Q(this)}},methods:{setShowLabel(r){this.checked=r,w(this.charOptions,this.checked),this.setOption()}},created(){L([W,O,$,B,T,E,D,F])}},U={class:"container"},X=["id"];function Y(r,e,t,a,s,o){const c=b("Tips"),l=b("Checkbox");return h(),J("div",U,[r.showTips&&r.tips?(h(),d(c,{key:0,class:"tips",tips:r.tips},null,8,["tips"])):m("",!0),r.showCheckbox?(h(),d(l,{key:1,class:"checkbox",initChecked:s.checked,onSetShowLabel:o.setShowLabel},null,8,["initChecked","onSetShowLabel"])):m("",!0),M("div",{id:t.id,style:P({height:r.height,width:r.width})},null,12,X)])}const Z=G(R,[["render",Y],["__scopeId","data-v-2579a657"]]),ee=H(Z),ce=V({__name:"Bar-demo",setup(r){return(e,t)=>(h(),d(q(ee)))}});export{ce as default};
